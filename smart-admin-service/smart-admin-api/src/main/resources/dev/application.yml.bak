######################### server ###################
server:
  servlet:
    context-path: /smart-admin-api
  port: 10086
######################### tomcat ###################
  tomcat:
    basedir: /home/logs/smart-admin/tomcat-logs
    accesslog:
      enabled: true
      pattern: '%t %{X-Forwarded-For}i %a "%r" %s %D (%D ms)'

file-upload-service:
  path: /home/upload/

spring:
  profiles:
    active: dev
  ######################### http file #########################
  servlet:
    multipart:
      max-file-size: 30MB
      max-request-size: 30MB
######################### database #########################
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
      minimum-idle: 5
      maximum-pool-size: 15
      idle-timeout: 30000
      max-lifetime: 1800000
      connection-timeout: 30000
      pool-name: OasisHikariCP
      connection-test-query: SELECT 1
    dynamic:
      primary: base
      filters: stat
      datasource:
        base:
          url: jdbc:mysql://192.168.120.132:3306/smart-admin-dev?autoReconnect=true&useServerPreparedStmts=false&rewriteBatchedStatements=true&characterEncoding=UTF-8&useSSL=false&allowMultiQueries=true&serverTimezone=UTC&allowPublicKeyRetrieval=true
          username: root
          password: root
          driver-class-name: com.mysql.cj.jdbc.Driver
        station:
          url: jdbc:mysql://192.168.120.132:3306/fullingdb?autoReconnect=true&useServerPreparedStmts=false&rewriteBatchedStatements=true&characterEncoding=UTF-8&useSSL=false&allowMultiQueries=true&serverTimezone=UTC&allowPublicKeyRetrieval=true
          username: root
          password: root
          driver-class-name: com.mysql.cj.jdbc.Driver
#    base:
#      druid:
#        username: druid
#        password: 123456
#        login:
#          enabled: false
#    station:
#      druid:
#        username: druid
#        password: 123456
#        login:
#          enabled: false
######################### sharding sphere #############################
  # 是否开启SQL显示
  shardingsphere:
    props:
      sql:
        show: true
     # ====================== ↓↓↓↓↓↓ 数据源配置 ↓↓↓↓↓↓ ======================
    datasource:
      names: sharding-fullingdb
      # ====================== ↓↓↓↓↓↓ 配置第1个主从库 ↓↓↓↓↓↓ ======================
      # 主库1
      sharding-fullingdb:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        # MySQL在高版本需要指明是否进行SSL连接 解决则加上 &useSSL=false
        jdbc-url: jdbc:mysql://192.168.120.132:3306/fullingdb?autoReconnect=true&useServerPreparedStmts=false&rewriteBatchedStatements=true&characterEncoding=UTF-8&useSSL=false&allowMultiQueries=true&serverTimezone=UTC&allowPublicKeyRetrieval=true
        username: root
        password: root
  # ====================== ↓↓↓↓↓↓ 分库分表配置 ↓↓↓↓↓↓ ======================
  sharding:
    tables:
      bus_tradelog:
        actual-data-nodes: sharding-fullingdb.bus_tradelog_20230$->{5..9},sharding-fullingdb.bus_tradelog_20231$->{0..2}
        table-strategy:
          standard:
            sharding-column: starttime
            # 自定义分表算法实现类
            precise-algorithm-class-name: net.lab1024.smartadmin.config.TimeShardingAlgorithm
            range-algorithm-class-name: net.lab1024.smartadmin.config.TimeShardingAlgorithm
######################### redis #######################################
  redis:
    database: 0
    host: 127.0.0.1
    port: 6379
    timeout: 10000ms
    password:
    lettuce:
      pool:
        max-active: 10
        min-idle: 5
        max-idle: 10
        max-wait: 30000ms
  ######################### jackson #########################
  jackson:
    serialization:
      write-enums-using-to-string: true
      write-dates-as-timestamps: false
    deserialization:
      read-enums-using-to-string: true
      fail-on-unknown-properties: false
    default-property-inclusion: always
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
#########################  quartz #############################
#\u8C03\u5EA6\u6807\u8BC6\u540D \u96C6\u7FA4\u4E2D\u6BCF\u4E00\u4E2A\u5B9E\u4F8B\u90FD\u5FC5\u987B\u4F7F\u7528\u76F8\u540C\u7684\u540D\u79F0
  quartz:
    properties:
      org:
        quartz:
          scheduler:
            instanceName: devClusteredScheduler
            instanceId: AUTO
            #\u8FDC\u7A0B\u7BA1\u7406\u76F8\u5173\u7684\u914D\u7F6E,\u5168\u90E8\u5173\u95ED
            rmi:
              export: false
              proxy: false
            #\u8DF3\u8FC7quartz\u7248\u672C\u68C0\u67E5
            skipUpdateCheck: true
          #\u6570\u636E\u4FDD\u5B58\u65B9\u5F0F\u4E3A\u6301\u4E45\u5316
          jobStore:
            class: org.quartz.impl.jdbcjobstore.JobStoreTX
            driverDelegateClass: org.quartz.impl.jdbcjobstore.StdJDBCDelegate
            tablePrefix: QRTZ_
            isClustered: true
            #\u8C03\u5EA6\u5B9E\u4F8B\u5931\u6548\u7684\u68C0\u67E5\u65F6\u95F4\u95F4\u9694, \u5F00\u53D1\u73AF\u5883\u6539\u4E3A\u4E8660\u79D2
            clusterCheckinInterval: 60000
            useProperties: false
          #\u8C03\u5EA6\u7EBF\u7A0B
          threadPool:
            class: org.quartz.simpl.SimpleThreadPool
            threadCount: 2
            threadPriority: 5
            threadsInheritContextClassLoaderOfInitializingThread: true
            threadNamePrefix: quartz
    job-store-type: jdbc
    #ALWAYS,EMBEDDED,NEVER
    jdbc:
      initialize-schema: NEVER
      schema: classpath:sql/quartz_mysql_2.3.0.sql

########################## rest http pool  #########################
#\u6700\u5927\u8FDE\u63A5\u6570
http:
  pool:
    max-total: 10
    #\u5355\u8DEF\u7531\u6700\u5927\u8FDE\u63A5\u6570
    default-max-per-route: 5
    #\u670D\u52A1\u5668\u8FD4\u56DE\u6570\u636E(response)\u7684\u65F6\u95F4
    socket-timeout: 8000
    #\u8FDE\u63A5\u4E0A\u670D\u52A1\u5668(\u63E1\u624B\u6210\u529F)\u7684\u65F6\u95F4
    connect-timeout: 8000
    #\u4ECE\u8FDE\u63A5\u6C60\u4E2D\u83B7\u53D6\u8FDE\u63A5\u7684\u8D85\u65F6\u65F6\u95F4
    connection-request-timeout: 8000

######################### mybatis\u914D\u7F6E #########################
mybatis:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
# mybatis-plus \u5B57\u6BB5\u9A7C\u5CF0\u81EA\u52A8\u8F6C\u6362
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
  mapper-locations: classpath:/mapper/**/**/*.xml
  typeAliasesPackage: net.lab1024.smartadmin.*.*.domain.entity
#  global-config:
#    refresh-mapper: true
#    db-column-underline: true

######################### swagger #########################
swagger:
  apiGroupName: smartAdmin
  title: smartAdmin
  description: smartAdmin
  version: 1.0
  serviceUrl: http://localhost:10086/smart-admin-api
  packAge: net.lab1024.smartadmin.module

######################### jwt #########################
jwt:
  key: smart-admin-jwt-key

########################## smart reload  #########################
smart-reload:
  thread-count: 1
  time-interval: 300

######################### cros #########################
access-control-allow-origin: '*'

######################### heart beat #########################
heart-beat:
  delayHandlerTime: 60000
  intervalTime: 300000

######################### heart beat #########################
#\u81EA\u52A8\u626B\u63CF\u4EFB\u52A1\u5355\u5E76\u53D1\u73B0\u6539\u52A8\u7684\u65F6\u95F4\u95F4\u9694,\u5355\u4F4D\u4E3A\u79D2
org:
  quartz:
    plugin:
      jobInitializer:
        scanInterval: 300

